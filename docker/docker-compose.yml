version: '2'
services:
  bhcfrontend:
    image: artifactory.bisnode.net/bisnode/bhc-frontend:develop
    extra_hosts:
      - "hub.bi.bisnode.de:10.49.128.11"
      - "dock-qa-se-04:10.49.128.166"
    depends_on:
      - mongo 
    environment:
      NODE_ENV: 'production'
      APP_NAME: 'bhcapp'
      APP_PORT: 9003
      APP_HOSTNAME: '0.0.0.0'
      APP_BASE_URL: 'http://localhost:9003'
      APP_DATABASE: 'mongo'
      APP_SECRET: '1HcmBUZx4GOSJUsIhHGs3fwbnDNRij6fBSKWcvkoK0j6F3VW0jaBOpTMRAjV70A'
      APP_REST_MAIN_SERVICE: 'http://bhcws:8080'
      MONGO_HOSTNAME: 'mongo'
      TERM: 'linux'
    ports:
      - 9008:9008
      - 9003:9003
      - 49154:49154
    restart: unless-stopped
    command: node /app/dist/server/app.js
  bhcws:
    image: artifactory.bisnode.net/bisnode/bhc-ws:develop
    environment:
      BHCWS_MODE: 'prod'
    ports:
      - 8084:8080
    restart: unless-stopped
  bddriver:
    image: artifactory.bisnode.net/bisnode/bdd-driver-ws-v1:latest-master
    depends_on:
      - mongo
    links:
      - bhcfrontend
    environment:
      MONGODB_HOST_LIST: 'mongo1.qa.cluster1.blue.bisnode.net'
      #MONGODB_DB_NAME: 'rgs_qa'
      #MONGODB_USERNAME: 'rgs_qa' 
      #MONGODB_PASSWORD: 'eTai2fieveeTaiwi'
      MONGODB_DB_NAME: 'rgs_dev'
      MONGODB_USERNAME: 'rgs_dev' 
      MONGODB_PASSWORD: ''
      SERVICES_AUTHORIZATION_ENABLED: 'false'
      AUTHORIZATION_SERVER_URL: 'dummy'
      AUTHORIZATION_CLIENT_ID: 'dummy'
      AUTHORIZATION_CLIENT_SECRET: 'dummy'
      SERVICE_UNDER_TEST_BASE_URL: 'dummy'
    ports:
      - 8033:8080
    restart: unless-stopped
  mongo:
    image: mongo:latest
    command: --storageEngine wiredTiger
    restart: unless-stopped
  bddui:
    image: artifactory.bisnode.net/bisnode/bdd-ui:latest-master
    ports:
     - 8092:8092
    restart: unless-stopped
    depends_on:
     - bddriver
    environment:
     BDD_WS_PORT: 8082
